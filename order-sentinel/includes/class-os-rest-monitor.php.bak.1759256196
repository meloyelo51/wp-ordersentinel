<?php
defined('ABSPATH') || exit;

class OS_REST_Monitor {

    // Minimal placeholder to avoid fatal if UI code isn't present yet.
    public static function render_page() {
        if ( ! current_user_can( 'manage_options' ) && ! current_user_can( 'manage_woocommerce' ) ) {
            wp_die( esc_html__( 'You do not have permission to view this page.', 'order-sentinel' ) );
        }
        echo '<div class="wrap"><h1>REST Monitor</h1><p>UI not loaded yet. Placeholder page is active.</p></div>';
    }



    

    public static function admin_menu() {
        $cb = [ __CLASS__, 'render_page' ];
        $title = 'REST Monitor';

        if ( class_exists( 'WooCommerce' ) ) {
            $cap = current_user_can( 'manage_woocommerce' ) ? 'manage_woocommerce' : 'manage_options';
            add_submenu_page(
                'woocommerce',
                $title,
                $title,
                $cap,
                'ordersentinel-rest',
                $cb
            );
            return;
        }

        // Fallback: Tools â†’ REST Monitor
        add_management_page(
            $title,
            $title,
            'manage_options',
            'ordersentinel-rest',
            $cb
        );
    }

// auto-fix: closing braces added
}
